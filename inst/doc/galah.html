<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Matilda Stevenson" />

<meta name="date" content="2021-08-06" />

<title>galah</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">galah</h1>
<h4 class="author">Matilda Stevenson</h4>
<h4 class="date">2021-08-06</h4>



<div id="about" class="section level1">
<h1>About</h1>
<p><code>galah</code> is an R interface to biodiversity data hosted by the <a href="https://ala.org.au">Atlas of Living Australia</a> (ALA). The ALA is a repository of biodiversity data, focussed primarily on observations of individual life forms. Like the Global Biodiversity Information Facility (<a href="https://www.gbif.org">GBIF</a>), the basic unit of data at ALA is an <strong>occurrence</strong> record, based on the <a href="https://dwc.tdwg.org">‘Darwin Core’</a> data standard.</p>
<p><code>galah</code> enables users to locate and download species observations, taxonomic information, or associated media such images or sounds, and to restrict their queries to particular taxa or locations. Users can specify which columns are returned by a query, or restrict their results to observations that meet particular quality-control criteria. All functions return a <code>data.frame</code> as their standard format.</p>
<p>Functions in <code>galah</code> are designed according to a nested architecture. Users that require data should begin by locating the relevant <code>ala_</code> function (see <a href="#downloading-data">downloading data section</a>); the arguments within that function then call correspondingly-named <a href="#filtering-data"><code>select_</code> functions</a>; and finally the specific values that can be interpreted by those <code>select_</code> functions are given by <code>find_</code> functions.</p>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>Install from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;galah&quot;</span>)</span></code></pre></div>
<p>Install the development version from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;AtlasOfLivingAustralia/galah&quot;</span>)</span></code></pre></div>
<p>See the <a href="https://github.com/AtlasOfLivingAustralia/galah/blob/master/README.md">README</a> for system requirements.</p>
<p>Load the package</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(galah)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">atlas =</span> <span class="st">&quot;Australia&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="filtering-data" class="section level1">
<h1>Filtering data</h1>
<p>Each occurrence record contains taxonomic information, and also some information about the observation itself, such as its location and the date of the observation. Each piece of information associated with a given occurrence is stored in a <strong>field</strong>, which corresponds to a <strong>column</strong> when imported to a <code>data.frame</code>.</p>
<p>Data fields are important because they provide a means to <em>filter</em> occurrence records; i.e. to return only the information that you need, and no more. Consequently, much of the architecture of <code>galah</code> has been designed to make filtering as simple as possible, by using functions with the <code>select_</code> prefix.</p>
<div id="taxonomic-filtering" class="section level2">
<h2>Taxonomic filtering</h2>
<p><code>select_taxa()</code> enables users search for taxonomic names and check the results are ‘correct’ before using the result to download data. The function allows both free-text searches and searches where the rank(s) are specified. Specifying the rank can be useful when names are ambiguous.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># free text search</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>taxa_filter <span class="ot">&lt;-</span> <span class="fu">select_taxa</span>(<span class="st">&quot;Eolophus&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># specifying ranks</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">select_taxa</span>(<span class="at">query =</span> <span class="fu">list</span>(<span class="at">genus =</span> <span class="st">&quot;Eolophus&quot;</span>, <span class="at">kingdom =</span> <span class="st">&quot;Aves&quot;</span>))</span></code></pre></div>
<pre><code>##     search_term scientific_name scientific_name_authorship
## 1 Eolophus_Aves        Eolophus            Bonaparte, 1854
##                                                              taxon_concept_id  rank match_type  kingdom   phylum class
## 1 urn:lsid:biodiversity.org.au:afd.taxon:b2de5e40-df8f-4339-827d-25e63454a4a2 genus exactMatch Animalia Chordata  Aves
##            order     family    genus  issues
## 1 Psittaciformes Cacatuidae Eolophus noIssue</code></pre>
<p>For more detailed taxonomic information use <code>search_taxonomy()</code>, as outlined in <code>vignette(&quot;taxonomic_information&quot;)</code></p>
</div>
<div id="location-based-filtering" class="section level2">
<h2>Location-based filtering</h2>
<p>Users can provide an <code>sf</code> object or a Well-Known Text (WKT) string for location-based filtering.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>locations <span class="ot">&lt;-</span> <span class="fu">select_locations</span>(<span class="at">query =</span> <span class="fu">st_read</span>(<span class="st">&#39;act_rect.shp&#39;</span>))</span></code></pre></div>
</div>
<div id="field-based-filtering" class="section level2">
<h2>Field based filtering</h2>
<p>As mentioned above, all occurrence records in the ALA contain additional information about the record, stored in <strong>fields</strong>. Field-based filters are specified with <code>select_filters()</code>, which takes individual filters, in the form <code>field = value</code>, and/or a <a href="#data-quality-profiles">data quality profile</a>.</p>
<p>To find available fields and corresponding valid values, field lookup functions are provided. For finding field names, use <code>search_fields()</code>, for finding valid field values, use <code>find_field_values()</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">search_fields</span>(<span class="st">&quot;basis&quot;</span>)</span></code></pre></div>
<pre><code>##                                                  id
## 11                                    basisOfRecord
## 186                               raw_basisOfRecord
## 661                         BASIS_OF_RECORD_INVALID
## 726 OCCURRENCE_STATUS_INFERRED_FROM_BASIS_OF_RECORD
##                                                                                                      description
## 11  What this is a record of e.g. specimen, human observation, fossil http://rs.tdwg.org/dwc/terms/basisOfRecord
## 186     The basis of record as supplied by the data publisher http://rs.tdwg.org/dwc/terms/verbatimBasisOfRecord
## 661                                                                                 Basis of record badly formed
## 726                                                              Occurrence status inferred from basis of record
##           type link
## 11      fields &lt;NA&gt;
## 186     fields &lt;NA&gt;
## 661 assertions &lt;NA&gt;
## 726 assertions &lt;NA&gt;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>field_values <span class="ot">&lt;-</span> <span class="fu">find_field_values</span>(<span class="st">&quot;basisOfRecord&quot;</span>)</span></code></pre></div>
<p>Build a field filter</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="fu">select_filters</span>(<span class="at">basisOfRecord =</span> <span class="st">&quot;HumanObservation&quot;</span>)</span></code></pre></div>
<p>It is also possible to pass other kinds of logical statement to <code>select_filters()</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="fu">select_filters</span>(<span class="at">basisOfRecord =</span> <span class="st">&quot;HumanObservation&quot;</span>,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>                          year <span class="sc">&gt;=</span> <span class="dv">2010</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                          occurrenceStatus <span class="sc">!=</span> <span class="st">&quot;absent&quot;</span>)</span></code></pre></div>
<div id="data-quality-profiles" class="section level3">
<h3>Data quality profiles</h3>
<p>A notable extention of the filtering approach is to remove records with low ‘quality’. ALA performs quality control checks on all records that it stores. These checks are used to generate new fields, that can then be used to filter out records that are unsuitable for particular applications. However, there are many possible data quality checks, and it is not always clear which are most appropriate in a given instance. Therefore, <code>galah</code> supports ALA data quality <strong>profiles</strong>, which can be passed to <code>select_filters()</code>to quickly remove undesirable records. A full list of data quality profiles is returned by <code>find_profiles()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>profiles <span class="ot">&lt;-</span> <span class="fu">find_profiles</span>()</span></code></pre></div>
<p>View filters included in a profile</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">find_profile_attributes</span>(<span class="st">&quot;ALA&quot;</span>)</span></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                 description
##  1:                                                                                                                                                                                                   Exclude all records where spatial validity is &quot;false&quot;
##  2: Exclude all records with an assertion that the scientific name provided does not match any of the names lists used by the ALA.  For a full explanation of the ALA name matching process see https://github.com/AtlasOfLivingAustralia/ala-name-matching
##  3:                                                                              Exclude all records with an assertion that the scientific name provided is not structured as a valid scientific name. Also catches rank values or values such as &quot;UNKNOWN&quot;
##  4:                                                                                                                              Exclude all records with an assertion that the name and classification supplied can&#39;t be used to choose between 2 homonyms
##  5:                                                                                                                                        Exclude all records with an assertion that kingdom provided doesn&#39;t match a known kingdom e.g. Animalia, Plantae
##  6:                                                    Exclude all records with an assertion that the scientific name provided in the record does not match the expected taxonomic scope of the resource e.g. Mammal records attributed to bird watch group
##  7:                                                                                                                                                          Exclude all records with an assertion of the occurence is cultivated or escaped from captivity
##  8:                                                                                                                                                                                Exclude all records with an assertion of latitude value provided is zero
##  9:                                                                                                                                                                               Exclude all records with an assertion of longitude value provided is zero
## 10:                                                                                                                                                                   Exclude all records with an assertion of  latitude and longitude have been transposed
## 11:                                                                                                                                                     Exclude all records with an assertion of coordinates are the exact centre of the state or territory
## 12:                                                                                                                                                               Exclude all records with an assertion of  coordinates are the exact centre of the country
## 13:                                                                                                                                                                                               Exclude all records where duplicate status is &quot;duplicate&quot;
## 14:                                                                                                                                                                       Exclude all records where coordinate uncertainty (in metres) is greater than 10km
## 15:                                                                                                                                                                                                    Exclude all records with unresolved user  assertions
## 16:                                                                                                                                                                                                   Exclude all records with unconfirmed  user assertions
## 17:                                                                                                                                                                                              Exclude all records where outlier layer count is 3 or more
## 18:                                                                                                                                                                                              Exclude all records where Record type is &quot;Fossil specimen&quot;
## 19:                                                                                                                                                                                             Exclude all records where Record type is &quot;EnvironmentalDNA&quot;
## 20:                                                                                                                                                                                                  Exclude all records where Presence/Absence is &quot;absent&quot;
## 21:                                                                                                                                                                                                         Exclude all records where year is prior to 1700
##                                                                                                                                                                                                                                                 description
##                                                                     filter
##  1:                                                -spatiallyValid:&quot;false&quot;
##  2:                                           -assertions:TAXON_MATCH_NONE
##  3:                                    -assertions:INVALID_SCIENTIFIC_NAME
##  4:                                              -assertions:TAXON_HOMONYM
##  5:                                            -assertions:UNKNOWN_KINGDOM
##  6:                                       -assertions:TAXON_SCOPE_MISMATCH
##  7:                                          -establishmentMeans:&quot;MANAGED&quot;
##  8:                                                     -decimalLatitude:0
##  9:                                                    -decimalLongitude:0
## 10:                              -assertions:&quot;PRESUMED_SWAPPED_COORDINATE&quot;
## 11:                      -assertions:&quot;COORDINATES_CENTRE_OF_STATEPROVINCE&quot;
## 12:                            -assertions:&quot;COORDINATES_CENTRE_OF_COUNTRY&quot;
## 13:                                          -duplicateStatus:&quot;ASSOCIATED&quot;
## 14:                            -coordinateUncertaintyInMeters:[10001 TO *]
## 15:                                                  -userAssertions:50001
## 16:                                                  -userAssertions:50005
## 17:                                            -outlierLayerCount:[3 TO *]
## 18:                                       -basisOfRecord:&quot;FOSSIL_SPECIMEN&quot;
## 19: -(basisOfRecord:&quot;MATERIAL_SAMPLE&quot; AND contentTypes:&quot;EnvironmentalDNA&quot;)
## 20:                                               -occurrenceStatus:ABSENT
## 21:                                                      -year:[* TO 1700]
##                                                                     filter</code></pre>
<p>Include a profile in the filters</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="fu">select_filters</span>(<span class="at">basisOfRecord =</span> <span class="st">&quot;HumanObservation&quot;</span>,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">profile =</span> <span class="st">&quot;ALA&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="downloading-data" class="section level1">
<h1>Downloading data</h1>
<p>Functions that return data from ALA are named with the prefix <code>ala_</code>, followed by a suffix describing the information that they provide.</p>
<p>By combining different filter functions, it is possible to build complex queries to return only the most valuable information for a given problem. Once you have retrieved taxon information, you can use this to <a href="#occurrence-data">search for occurrence records</a> with <code>ala_occurrences()</code>. However, it is also possible to <a href="#species-data">download data on species</a> via <code>ala_species()</code>, or <a href="#media_downloads">media content</a> (largely images) via <code>ala_media()</code>. Alternatively, users can <a href="#record-counts">retrieve record counts</a> using <code>ala_counts()</code>.</p>
<div id="occurrence-data" class="section level2">
<h2>Occurrence data</h2>
<p>In addition to the <a href="#filtering-data">filter functions</a> above, when downloading occurrence data users can specify which columns are returned using <code>select_columns()</code>. Individual column names and/or column groups can be specified. To view the fields for each group, see the documentation for <code>select_columns()</code>. To view the list of available fields, run <code>search_fields()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">select_columns</span>(<span class="st">&quot;institutionID&quot;</span>, <span class="at">group =</span> <span class="st">&quot;basic&quot;</span>)</span></code></pre></div>
<p>To download occurrence data you will need to specify your email in <code>galah_config()</code>. This email must be associated with an active ALA account. See more information in the <a href="#config">config section</a></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">email =</span> your_email_here, <span class="at">atlas =</span> <span class="st">&quot;Australia&quot;</span>)</span></code></pre></div>
<p>Download occurrence records for <em>Eolophus roseicapilla</em></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>occ <span class="ot">&lt;-</span> <span class="fu">ala_occurrences</span>(<span class="at">taxa =</span> <span class="fu">select_taxa</span>(<span class="st">&quot;Eolophus roseicapilla&quot;</span>),</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">filters =</span> <span class="fu">select_filters</span>(<span class="at">stateProvince =</span> <span class="st">&quot;Australian Capital Territory&quot;</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                                                year <span class="sc">&gt;=</span> <span class="dv">2010</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                                                <span class="at">profile =</span> <span class="st">&quot;ALA&quot;</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">columns =</span> <span class="fu">select_columns</span>(<span class="st">&quot;institutionID&quot;</span>, <span class="at">group =</span> <span class="st">&quot;basic&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(occ)</span></code></pre></div>
<pre><code>##   decimalLatitude decimalLongitude            eventDate        scientificName
## 1       -35.88717         148.9713                      Eolophus roseicapilla
## 2       -35.86784         149.0101                      Eolophus roseicapilla
## 3       -35.86556         149.0106 2012-01-18T13:00:00Z Eolophus roseicapilla
## 4       -35.86429         149.0052                      Eolophus roseicapilla
## 5       -35.77517         148.9591                      Eolophus roseicapilla
## 6       -35.76652         148.9654                      Eolophus roseicapilla
##                                                                taxonConceptID                             recordID
## 1 urn:lsid:biodiversity.org.au:afd.taxon:577ff059-a2a7-48b0-976c-fdd6a345f878 17f46d49-7db0-4929-89f4-b29323f3fcc5
## 2 urn:lsid:biodiversity.org.au:afd.taxon:577ff059-a2a7-48b0-976c-fdd6a345f878 ef2b9066-c078-4660-b9a4-c31192aa8bf7
## 3 urn:lsid:biodiversity.org.au:afd.taxon:577ff059-a2a7-48b0-976c-fdd6a345f878 4f7cd714-2997-45d6-adaf-f7dfc80adfe1
## 4 urn:lsid:biodiversity.org.au:afd.taxon:577ff059-a2a7-48b0-976c-fdd6a345f878 3236c470-a144-4300-ae9b-782d0e5e4dd1
## 5 urn:lsid:biodiversity.org.au:afd.taxon:577ff059-a2a7-48b0-976c-fdd6a345f878 e340c423-3a19-4293-aa72-e4045bb7f702
## 6 urn:lsid:biodiversity.org.au:afd.taxon:577ff059-a2a7-48b0-976c-fdd6a345f878 f25793f3-2704-43ff-80ee-c2a1787490e7
##              dataResourceName institutionID
## 1             eBird Australia              
## 2             eBird Australia              
## 3 BirdLife Australia, Birdata              
## 4             eBird Australia              
## 5             eBird Australia              
## 6             eBird Australia</code></pre>
</div>
<div id="species-data" class="section level2">
<h2>Species data</h2>
<p>A common use case of the ALA is to identify which species occur in a specified region, time period, or taxonomic group. <code>ala_species()</code> enables the user to look up this information, using the common set of filter functions.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List rodent species in the NT</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>species <span class="ot">&lt;-</span> <span class="fu">ala_species</span>(<span class="at">taxa =</span> <span class="fu">select_taxa</span>(<span class="st">&quot;Rodentia&quot;</span>),</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">filters =</span> <span class="fu">select_filters</span>(<span class="at">stateProvince =</span> <span class="st">&quot;Northern Territory&quot;</span>))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(species)</span></code></pre></div>
<pre><code>##    kingdom   phylum    class    order  family        genus                     species            author
## 1 Animalia Chordata Mammalia Rodentia Muridae Mesembriomys        Mesembriomys gouldii (J.E. Gray, 1843)
## 2 Animalia Chordata Mammalia Rodentia Muridae      Zyzomys             Zyzomys argurus    (Thomas, 1889)
## 3 Animalia Chordata Mammalia Rodentia Muridae    Pseudomys Pseudomys hermannsburgensis     (Waite, 1896)
## 4 Animalia Chordata Mammalia Rodentia Muridae      Notomys              Notomys alexis      Thomas, 1922
## 5 Animalia Chordata Mammalia Rodentia Muridae      Melomys             Melomys burtoni    (Ramsay, 1887)
## 6 Animalia Chordata Mammalia Rodentia Muridae          Mus                Mus musculus    Linnaeus, 1758
##                                                                  species_guid        vernacular_name
## 1 urn:lsid:biodiversity.org.au:afd.taxon:f38bcd7e-ae6a-4734-bd64-06995bc230eb  Black-footed Tree-rat
## 2 urn:lsid:biodiversity.org.au:afd.taxon:46611113-a1e3-45b1-b58c-7aef088a9da7        Common Rock-rat
## 3 urn:lsid:biodiversity.org.au:afd.taxon:5d73fc2f-3caa-4b44-aa40-3711e8304f80     Sandy Inland Mouse
## 4 urn:lsid:biodiversity.org.au:afd.taxon:49001532-929e-4b78-97d3-c885e97d671b Spinifex Hopping-mouse
## 5 urn:lsid:biodiversity.org.au:afd.taxon:89dfa41e-2c5a-44d1-80bf-8d4cd3c73089      Grassland Melomys
## 6 urn:lsid:biodiversity.org.au:afd.taxon:107696b5-063c-4c09-a015-6edfdb6f4d52            House Mouse</code></pre>
</div>
<div id="record-counts" class="section level2">
<h2>Record counts</h2>
<p><code>ala_counts()</code> provides summary counts on records in the ALA, without needing to download all the records. In addition to the filter arguments, it has an optional <code>group_by</code> argument, which provides counts binned by the requested field.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of records in the ALA</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ala_counts</span>()</span></code></pre></div>
<pre><code>## [1] 100871912</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of records, broken down by kindgom</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ala_counts</span>(<span class="at">group_by =</span> <span class="st">&quot;kingdom&quot;</span>)</span></code></pre></div>
<pre><code>##      kingdom    count
## 1   Animalia 75649166
## 2    Plantae 21472247
## 3      Fungi  1877219
## 4  Chromista   914334
## 5   Protista    67279
## 6   Bacteria    58081
## 7   Protozoa    22681
## 8    Archaea     1103
## 9  Eukaryota      735
## 10     Virus      421</code></pre>
</div>
<div id="media-downloads" class="section level2">
<h2>Media downloads</h2>
<p>In addition to text data describing individual occurrences and their attributes, ALA stores images, sounds and videos associated with a given record. These can be downloaded to <code>R</code> using <code>ala_media()</code> and the same set of filters as the other data download functions.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the occurrences previously downloaded</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>media_data <span class="ot">&lt;-</span> <span class="fu">ala_media</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">taxa =</span> <span class="fu">select_taxa</span>(<span class="st">&quot;Eolophus roseicapilla&quot;</span>),</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">filters =</span> <span class="fu">select_filters</span>(<span class="at">year =</span> <span class="dv">2020</span>),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">download_dir =</span> <span class="st">&quot;media&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="config" class="section level1">
<h1>Config</h1>
<p>Various aspects of the galah package can be customized. To preserve configuration for future sessions, set <code>profile_path</code> to a location of a <code>.Rprofile</code> file.</p>
<div id="email" class="section level2">
<h2>Email</h2>
<p>To download occurrence records, you will need to provide an email address registered with the ALA. You can create an account <a href="https://auth.ala.org.au/userdetails/registration/createAccount">here</a>. Once an email is registered with the ALA, it should be stored in the config:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">email=</span><span class="st">&quot;myemail@gmail.com&quot;</span>)</span></code></pre></div>
</div>
<div id="caching" class="section level2">
<h2>Caching</h2>
<p><code>galah</code> can cache most results to local files. This means that if the same code is run multiple times, the second and subsequent iterations will be faster.</p>
<p>By default, this caching is session-based, meaning that the local files are stored in a temporary directory that is automatically deleted when the R session is ended. This behaviour can be altered so that caching is permanent, by setting the caching directory to a non-temporary location.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">cache_directory=</span><span class="st">&quot;example/dir&quot;</span>)</span></code></pre></div>
<p>By default, caching is turned off. To turn caching on, run</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">caching=</span><span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="debugging" class="section level2">
<h2>Debugging</h2>
<p>If things aren’t working as expected, more detail (particularly about web requests and caching behaviour) can be obtained by setting the <code>verbose</code> configuration option:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">verbose=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="setting-the-download-reason" class="section level2">
<h2>Setting the download reason</h2>
<p>ALA requires that you provide a reason when downloading occurrence data (via the galah <code>ala_occurrences()</code> function). The reason is set as “scientific research” by default, but you can change this using <code>galah_config()</code>. See <code>find_reasons()</code> for valid download reasons.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">galah_config</span>(<span class="at">download_reason_id=</span>your_reason_id)</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
